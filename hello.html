<!DOCTYPE html>
<meta charset="utf-8">

<style>
  table, td, th{
    border:1px solid black;
  }
</style>
<html lang="lt">
<body onload="prepare()">

  <h1>Sveiki atvykÄ™ &lt;3 </h1>
  <img src="https://cdn.shopify.com/s/files/1/0221/7106/products/Lotus_Rose_1024x1024.jpg?v=1582661928" height="100">
  <h2>prisijunk prie kambario:</h2>
  <table>
    <tr>
      <th style="width:200px">Pavadinimas</th>
      <th style="width:400px">Informacija</th>
    </tr>
    <tbody id="rooms">

    </tbody>
  </table>
  
<script>
  function prepare(){
    refreshRooms();
  }
  function refreshRooms(){
      var rooms = document.getElementById("rooms");
      rooms.replaceChildren();
      fetch("/getRooms", {
          method: "POST",
          headers: {
          "Content-Type": "application/json"
          }
      })
          .then(response => response.json())
          .then(data =>{
              for (el of data.rooms){
                  var tr = document.createElement("tr");
                  var room_name = document.createElement("td");
                  room_name.innerHTML = '<a href="room?id=' + el.id +'">' + el.name + "</a>";
                  var room_info = document.createElement("td");
                  room_info.innerHTML = el.info;
                  tr.appendChild(room_name);
                  tr.appendChild(room_info);
                  rooms.appendChild(tr);
              }
          });
  }
</script>